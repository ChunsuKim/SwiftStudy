### 4_인스턴스가 만들어질 때 기능 수행하기

객체가 실제 세계의 모든 것을 나타내는 것이라면 실제 사람뿐만 아니라 사람을 만드는 틀인 클래스도 객체처럼 생각할 수 있다.
따라서 클래스와 클래스로 만든 객체를 구별하기 위해 클래스로부터 만들어진 객체를 '인스턴스(Instance)'라고 부르기도 한다.
인스턴스 또는 인스턴스 객체란 클래스에서 찍어낸 실제 객체를 의미한다. 다시 말해, 인스턴스는 클래스로 미리 모양을 정의한 후 '실제 객체를 만들어 주는 함수'를 호출해서 만든 객체이다.

![그림](https://user-images.githubusercontent.com/47494240/54490595-7d234c80-48fa-11e9-835d-a3eee0d8520e.png)

'실제 객체를 만들어 주는 함수'란 클래스가 객체를 만들 때 호출되는 함수라고 생각할 수 있다. 그러면 이 함수의 역할을 한 번 살펴보겠다.
클래스로 사람 객체를 만든다는 것은 이미 잘 알고 있다. 그런데 사람 객체를 만들 때 사람 이름을 같이 넣을 수 있을까?
Person()이라는 코드가 함수를 호출하는 방식과 같으니 소괄호 안에 사람의 이름을 넣어 파라미터로 전달하는 방법은 어떨까?
클래스에는 새로운 객체를 만들 때 초기 데이터를 같이 넣을 수 있게 init라는 이름의 함수를 추가할 수 있다. 이 init 함수는 객체가 생성될 때 자동으로 호출된다.
```swift
class Person {
    var name:String?
    
    init() {
    }
    
    init(name:String) {
        self.name = name
    }
    
    func walk(speed:Int) {
        print("\(name)이(가) \(speed)km 속도로 걸어갑니다.")
    }
    
    func run(speed:Int) {
        print("\(name)이(가) \(speed)km 속도로 뛰어갑니다.")
    }
}

var person01 = Person(name: "철수")
person01.walk(speed: 10)

var person02 = Person(name: "영희")
person02.walk(speed: 20)

var person03 = Person(name: "민희")
person03.walk(speed: 24)

출력값) Optional("철수")이(가) 10km 속도로 걸어갑니다.
출력값) Optional("영희")이(가) 20km 속도로 걸어갑니다.
출력값) Optional("민희")이(가) 24km 속도로 걸어갑니다.
```
클래스 안에 선언한 변수에는 항상 초기 값이 들어 있어야 한다고 했다. 그런데 옵셔널로 선언하는 경우에는 nil 값이 들어가도 상관없으므로 선언만 하는 것을 허용한다.

결국 클래스 안에 변수를 선언하는 방법은 다음처럼 두 가지 형태로 구분할 수 있다.

> 1. 변수를 선언하고 init 함수 안에서 변수에 초기 값을 할당한다.
>
> 2. 변수를 선언할 때 옵셔널로 선언한다.

객체의 초기화를 담당하는 함수를 '초기화 함수(Initializer)'라고 부른다. 즉, 클래스로부터 객체를 만들 때 호출되는 함수이다.
이 초기화 함수를 사용해서 객체를 만들 때는 클래스 이름 뒤에 소괄호를 붙이고 그 안에 파라미터로 전달할 값을 입력한다. 그러면 그 값이 초기화 함수 안으로 전달된다.

![그림](https://user-images.githubusercontent.com/47494240/54490596-7d234c80-48fa-11e9-9f44-da0e60d2aac4.png)

self 키워드는 자기 자신을 의미한다. 따라서 Person 클래스 안에 들어 있는 name 변수는 self.name으로 참조할 수 있다.
첫 번째로 추가한 init 함수는 소괄호 안에 아무런 데이터도 넣지 않은 형태인데 새로운 객체를 만들 때는 이 함수가 기본으로 호출된다.
이 초기화 함수는 클래스를 만들 때 내부에 자동으로 생성되므로 직접 선언하지 않아도 문제가 되지 않는다.
따라서 객체를 만들 때 추가적으로 전달해야 하는 데이터가 있거나 추가 기능이 필요할 때만 클래스에 초기화 함수를 추가한다.

초기화 함수도 함수 중의 하나인데 init라는 특정 이름으로 정의한 이유는 초기화 작업 외에는 직접 호출할 일이 없기 때문이다.
사람 이름을 파라미터로 전달 받는 init 함수를 클래스 안에 하나 더 추가했으므로 새로운 Person 객체를 만드는 코드 부분은 위에처럼 변경한다.

name 변수가 옵셔널 자료형으로 만들어졌기 때문에 print 함수로 출력할 때 Optional 이라는 글자와 함께 출력된다.
입력했던 코드를 다시 보면, 파라미터가 하나도 전달되지 않은 init 함수도 넣어주고, 이름을 전달하기 위한 파라미터가 하나 들어 있는 init 함수도 함께 넣었으니 같은 이름을 가진 함수가 두 개이다.
init 함수뿐만 아니라 함수라는 것 자체가 같은 이름을 가졌더라도 여러 개 만들어질 수 있다. 다만 각각의 함수는 파라미터의 자료형과 개수가 서로 달라야 한다.
이것을 함수의 '다중 정의(Overloading)'라고 한다.

![그림](https://user-images.githubusercontent.com/47494240/54490597-7d234c80-48fa-11e9-833e-07b2554086fb.png)

이렇게 그림으로 정리해 보면 '함수의 이름이 같더라도 함수에 전달되는 파라미터가 몇 개인지, 그리고 각 자료형이 무엇인지 구분해야 되겠구나!'라고 생각할 수 있다.

함수로 전달되는 파라미터가 무엇인지에 따라서 함수가 처리하는 기능이 달라질 수도 있으니 파라미터는 중요할 수밖에 없다. 그럼 이번에는 변수에 할당된 객체 자료형을 사용할 때 눈여겨봐야 할 특징에 대해 알아본다.
먼저 person04라는 이름의 변수를 만들고 person03 객체를 할당한다. 그리고 person03 객체의 name 변수에 다른 사람의 이름을 할당한다.
```swift
var person04 = person03
person04.walk(speed: 30)

person03.name = "수진"
person04.walk(speed: 30)

출력값) Optional("민희")이(가) 30km 속도로 걸어갑니다.
출력값) Optional("수진")이(가) 30km 속도로 걸어갑니다.
```
이 코드를 실행했을 때 메모리에서 어떤 변화가 일어나는지 살펴보겠다.
person04 변수 상자에는 실제 사람 객체가 들어 있지 않고 단순히 person03 변수 상자에 들어 있는 사람 객체를 가리키는 역할만 한다. 이것을 '레퍼런스(Reference)'라고 한다.

![그림](https://user-images.githubusercontent.com/47494240/54490598-7dbbe300-48fa-11e9-912e-f9cd790863a2.png)

레퍼런스는 실제 객체를 담고 있는 것이 아니라 실제 객체가 만들어진 메모리의 위치만 가리킨다.

그런데 Int 자료형으로 변수 상자를 만들 때는 메모리에서 처리되는 방식이 약간 다르다.
예를 들어, Int 자료형으로 a라는 이름의 변수 상자를 만들고 그 값을 10으로 한 다음 Int 자료형으로 b라는 또 다른 변수 상자를 만든다.
그러면 지금까지 알고 있던 것처럼 메모리에서 b라는 변수 상자에도 10이라는 값이 직접 들어가므로 레퍼런스가 만들어지지 않는다.
그 이유는 기본 자료형일 때는 레퍼런스를 만들지 않고 원래의 변수 상자에 있던 값을 복사해서 새로운 변수 상자에 넣기 때문이다. 이런 방식을 '값(Value)으로 복사한다'고 한다.

![그림](https://user-images.githubusercontent.com/47494240/54490599-7dbbe300-48fa-11e9-9e91-e471914a746a.png)

함수 상자로 전달되는 파라미터도 마찬가지여서 기본 자료형은 복사해서 전달하고 객체 자료형은 레퍼런스로 전달한다.
복사해서 전달하는 것을 '값으로 전달한다(Pass By Value).'라고 하고 객체를 가리키는 방식으로 전달하는 것을 '레퍼런스로 전달한다(Pass By Reference).'라고 한다.

다음 코드를 입력하고 실행하면 값을 복사해서 전달하는지, 아니면 레퍼런스로 전달하는지 확인할 수 있다.
```swift
func changePerson(person:Person) {
    person.name = "진경"
}

changePerson(person: person03)
person04.walk(speed: 40)

출력값) Optional("진경")이(가) 40km 속도로 걸어갑니다.
```
changePerson 함수는 전달 받은 Person 객체의 name 변수 값을 "진경"으로 바꾼다.
함수에서 반환하는 객체는 없으므로 changePerson 함수로 Person 객체를 전달하고 나면 반환 받을 수 없다.
그러나 person03 변수에 할당된 Person 객체를 changePerson 함수를 호출하면서 전달한 후 person04 객체의 walk 함수를 호출하면 name 변수 값이 "진경"으로 변경된 것을 알 수 있다.
지금까지 해 본 것처럼, 객체를 전달했을 때 복사되는 것이 아니라 그 객체가 있는 곳을 가리킨다는 것을 알아야 코드가 어떻게 동작하는지 이해할 수 있다.


#### 객체 자료형의 비교

두 개의 객체가 같거나 다른지는 어떻게 비교할 수 있을까? 객체 자료형은 기본 자료형과 달라서 두 개의 변수에 들어 있는 객체가 같은지 또는 다른지를 알기 위해서 두 단계의 과정을 거친다.
첫 번째 단계에서는 먼저 자료형을 비교한다. 그리고 자료형이 서로 같다면 두 번째 단계로 넘어가서 그 안에 들어 있는 속성을 비교한다.

> **객체가 같은지 다른지를 비교하는 과정**
>
> 1. 두 객체의 자료형을 비교한다.
>
> 2. 두 객체의 자료형이 같다면 그 안에 들어 있는 속성을 비교한다.

이때 사용되는 연산자가 ===와 !==이다. person01과 person02가 같은지, 그리고 person03과 person04가 같은지 === 연산자를 사용해서 확인해 보겠다.
```swift
if person01 === person02 {
    print("person01과 person02는 같습니다.")
} else {
    print("person01과 person02는 다릅니다.")
}

if person03 === person04 {
    print("person03과 person04는 같습니다.")
} else {
    print("person03과 person04는 다릅니다.")
}

출력값) person01과 person02는 다릅니다.
출력값) person03과 person04는 같습니다.
```
이미 알고 있는 것처럼 person01과 person02는 다른 객체이다. 그리고 person03과 person04는 같은 객체를 가리키고 있다.
person04 변수가 person03 객체를 가리키고 있기 때문이다.

!== 연산자는 두 개의 객체가 다른 경우에 true 값을 반환한다. 두 연산자를 정리하면 다음과 같다.

> **두 객체가 같으면 ture를 반환한다.**
>
> 1. === 연산자 -> 두 개의 객체가 같으면 true를 반환한다.
>
> 2. !== 연산자 -> 두 개의 객체가 다르면 true를 반환한다.

두 개의 변수가 기본 자료형으로 만들어진 경우에는 == 연산자나 != 연산자를 사용한다.
따라서 기본 자료형을 비교할 때와 객체 자료형을 비교할 때 사용하는 연산자가 서로 다르다는 점에 주의해야 한다.
숫자나 문자열이 들어 있는 두 개의 변수를 비교할때는 ==, 객체 자료형으로 된 두 개의 변수를 비교할 때는 === 연산자를 사용한다고 생각하면 좀 더 쉽게 기억할 수 있다.

Quiz 19

Dog 클래스를 만들고 그 안에 속성을 넣은 후 초기화 함수를 추가해 보세요. Dog 클래스를 정의한 후 name 속성을 추가합니다. 그리고 초기화 함수를 추가하여 그 안에서 name 속성의 값을 초기화하도록 합니다.
클래스를 만들었다면 이 클래스로부터 두 개의 실제 강아지 객체를 만들고 두 개의 강아지 객체가 같은지를 비교합니다.
```swift
class Dog {
    var name:String?
    
    init(name:String) {
        self.name = name
    }
    
    func walk() {
        print("\(name) 강아지가 걸어갑니다.")
    }
}

var dog1 = Dog(name: "미미")
var dog2 = Dog(name: "캔디")

if dog1 === dog2 {
    print("dog1과 dog2는 같습니다.")
} else {
    print("dog1과 dog2는 다릅니다.")
}

출력값) dog1과 dog2는 다릅니다.
```


[Ch4_classes3.md 파일로 가기](https://github.com/ChunsuKim/SwiftStudy/blob/master/Ch4_classes3.md)

[Swift Study Contents로 돌아가기](https://github.com/ChunsuKim/SwiftStudy)
